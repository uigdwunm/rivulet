# rivulet(æºªæµ)
## ç›®å½•
+ [è¯´æ˜æ–‡æ¡£](#è¯´æ˜æ–‡æ¡£)
+ [å¿«é€Ÿå¼€å§‹](#å¿«é€Ÿå¼€å§‹)
+ [äº®ç‚¹ä¸ç‰¹æ€§](#äº®ç‚¹ä¸ç‰¹æ€§)
  + [æŒä¹…å±‚ç»Ÿä¸€æ€æƒ³](#æŒä¹…å±‚ç»Ÿä¸€æ€æƒ³)
  + [å¯¹è±¡åŒ–SQL](#å¯¹è±¡åŒ–SQL)
  + [è¯­å¥æ‹¼æ¥](#è¯­å¥æ‹¼æ¥)
  + [æ‰©å±•æ€§å¼º](#æ‰©å±•æ€§å¼º)
+ [åŸºæœ¬æŸ¥è¯¢æ¼”ç¤º](#åŸºæœ¬æŸ¥è¯¢æ¼”ç¤º)
+ [æ²¡æœ‰ç¼“å­˜](#æ²¡æœ‰ç¼“å­˜)
+ [è®¾è®¡æ¼”è¿›](#è®¾è®¡æ¼”è¿›)
+ [ç”»é¥¼](#ç”»é¥¼)
+ [åŠæˆå“](#åŠæˆå“)
+ [å¯„è¯­](#å¯„è¯­)

## è¯´æ˜æ–‡æ¡£
1. [splè¯­å¥æ˜ å°„è§„åˆ™](docs/cn/ä½¿ç”¨è¯´æ˜/sqlè¯­å¥æ˜ å°„è§„åˆ™.md)
2. [æ‰©å±•ç‚¹](docs/cn/ä½¿ç”¨è¯´æ˜/æ‰©å±•ç‚¹.md)
#### å…¶ä»–ä»‹ç»æ–‡æ¡£
1. [æ¦‚è§ˆä»‹ç»](https://mp.weixin.qq.com/s/h4YeXvYREXcMRS9HwqBKaw)
2. [å…³äºè½»æ¾å†™å‡ºä¸€ä¸ªSQL](https://mp.weixin.qq.com/s/TW_k1Ur-L0nmCBXFJyJ4HA)

## å¿«é€Ÿå¼€å§‹
### ä½¿ç”¨springæ¥å…¥
[rivulet-spring](https://github.com/uigdwunm/rivulet-spring)
### ä½¿ç”¨åŸç”Ÿæ–¹å¼æ¥å…¥ï¼ˆæœ€ç®€å•æ¡ˆä¾‹å¿«é€Ÿå¼€å§‹ï¼‰
>
>&lt;dependency>\
>&ensp;&ensp;&ensp;&ensp;&lt;groupId>io.github.uigdwunm&lt;/groupId>\
>&ensp;&ensp;&ensp;&ensp;&lt;artifactId>rivulet-mysql&lt;/artifactId>\
>&ensp;&ensp;&ensp;&ensp;&lt;version>0.0.13-PREVIEW&lt;/version>\
>&lt;/dependency>
1. å‡†å¤‡å£°æ˜RivuletManagerï¼Œå¹¶é…ç½®è¦æ‰«æçš„åŒ…ã€‚
```java
public class CreateSQLRivuletManagerTest {
  public SQLRivuletManager createRivuletManager() {
    SQLRivuletManager rivuletManager = new DefaultMySQLDataSourceRivuletManager(
            new MySQLRivuletProperties(),
            createRealDataSource()
    );
    rivuletManager.putInStorageByBasePackage("zly.rivulet.mysql");
    return rivuletManager;
  }
}
```

2. å£°æ˜è¡¨æ¨¡å‹å¯¹è±¡ï¼Œè¿™é‡Œéœ€è¦æ¯”è¾ƒå…¨é¢çš„è¡¨ä¿¡æ¯ã€‚
+ ç±»æ³¨è§£ @SQLTable æ˜¯å¿…é¡»çš„ï¼Œå¯¹åº”è¡¨å
+ æ¯ä¸ªå­—æ®µçš„@SQLColumn æ˜¯å¿…é¡»çš„ï¼Œå¯¹åº”å­—æ®µåã€‚
+ æ¯ä¸ªå­—æ®µçš„ç±»å‹ æ¯”å¦‚ @MySQLBigIntã€@MySQLVarcharâ€¦â€¦ï¼Œä¹Ÿæ˜¯å¿…é¡»çš„
```java
@SQLTable("t_person")
public class PersonDO {

  @PrimaryKey
  @SQLColumn("id")
  @MySQLBigInt
  private Long id;

  @SQLColumn
  @MySQLVarchar(length = 64)
  private String name;
  
  public Long getId() {
    return id;
  }

  public void setId(long id) {
    this.id = id;
  }

  public String getName() {
    return name;
  }

  public void setName(String name) {
    this.name = name;
  }
}
```

3. åœ¨æ‰«æçš„åŒ…è·¯å¾„èŒƒå›´å†…ï¼Œå£°æ˜Descæ¥è¡¨è¾¾sqlè¯­å¥ã€‚
+ Descæ–¹æ³•å¿…é¡»æ˜¯æ— å‚æ–¹æ³•ï¼Œè¿”å›å€¼WholeDescã€‚
+ æ–¹æ³•å¿…é¡»åŠ æ³¨è§£ @RivuletDescï¼Œå¹¶èµ‹äºˆä¸€ä¸ªå”¯ä¸€keyï¼Œç”¨æ¥å®šä½è¿™ä¸ªè¯­å¥ã€‚
```java
public class CreateDesc {
  @RivuletDesc("queryById")
  public WholeDesc queryById() {
    return SQLQueryBuilder.query(PersonDO.class, PersonDO.class)
            .where(Condition.Equal.of(PersonDO::getId, Param.staticOf(2)))
            .build();
  }
}
```

4. è°ƒç”¨æ—¶ï¼Œé€šè¿‡RivuletManagerå¯¹è±¡ï¼Œè·å–ä¸€ä¸ªRivuletè¿›è¡Œè°ƒç”¨ã€‚
+ rivuletå¯¹è±¡æœ‰å„ç§æ–¹æ³•ï¼Œéœ€è¦é€šè¿‡keyå®šä½è¯­å¥ï¼Œå°±æ˜¯ä¸Šé¢@RivuletDescä¸­çš„key
+ å¦‚æœæŸ¥è¯¢å•ä¸ªå°±queryOneï¼Œå¤šä¸ªå°±queryMany
```java
public class ExecTest {
  public void exec() {
    Rivulet rivulet = rivuletManager.getRivulet();
    PersonDO result = rivulet.queryOneByDescKey("queryById", Collections.emptyMap());
  }
}
```

## äº®ç‚¹ä¸ç‰¹æ€§
### æŒä¹…å±‚ç»Ÿä¸€æ€æƒ³
è¿™æ˜¯æˆ‘åœ¨ç»“æ„è®¾è®¡ä¸Šé¢„ç•™çš„ä¸€ç§å¯èƒ½æ€§ã€‚\
å½“æˆ‘ä»¬è®¿é—®mysqlã€oracleã€pgsqlã€mongoã€esç­‰ï¼Œè¿™äº›å­˜å‚¨ç±»ä¸­é—´ä»¶æ—¶ï¼Œä¼šä½¿ç”¨å…¶å„è‡ªçš„è¯­æ³•è¯­å¥æ¥è¿›è¡Œè°ƒç”¨ã€‚\
é‚£ä½ å¯æ›¾æƒ³è¿‡ï¼Œä¸€äº›ç®€å•çš„æŸ¥è¯¢è¡Œä¸ºï¼Œæœ¬è´¨ä¸Šæ˜¯ç»Ÿä¸€çš„æ¨¡å¼ã€‚\
ä¿å­˜ã€æ›´æ–°ä¹‹ç±»çš„å°±ä¸å¿…å¤šè¯´äº†éƒ½ä¸€æ ·ï¼Œæ¥æƒ³æƒ³å¸¸ç”¨çš„æŸ¥è¯¢ã€‚\
æ¯”å¦‚ç­‰å€¼æŸ¥è¯¢(=)ã€å¤§äº(>)ã€å°äº(<)ã€inä¹‹ç±»çš„æ“ä½œã€‚
æ„ä¹‰ä¸Šæ˜¯ä¸æ˜¯ç»Ÿä¸€çš„ï¼Ÿ\
ä½†æ˜¯æˆ‘ä»¬è¦ç”¨æ¯ç§ä¸­é—´ä»¶çš„è¯­æ³•å»å†™è¯­å¥ã€‚\
å¥½çƒ¦å•Šï¼ï¼ï¼\
ä¸ºä»€ä¹ˆæ²¡äººæŠŠè¿™äº›éƒ½å°è£…èµ·æ¥!\
â€¦â€¦\
æ— æ‰€è°“ï¼Œæˆ‘ä¼šå‡ºæ‰‹!\
è¯è¯´å›æ¥ï¼Œç›®å‰ä¸ºæ­¢ï¼Œè¿™è¿˜åªæ˜¯ä¸ªé¥¼ã€‚\
æˆ‘åªå®ç°äº†mysqlçš„å°è£…ã€‚\
ä½†æ˜¯åœ¨æ¶æ„è®¾è®¡ä¸Šæˆ‘å·²ç»åšå¥½å‡†å¤‡äº†ï¼Œçœ‹çœ‹æ¨¡å—åˆ’åˆ†ã€‚
+ rivulet-base
+ rivulet-spl
+ rivulet-mysql

è¿™ä¸ªé¥¼å…ˆç”»åœ¨è¿™ï¼Œç­‰æˆ‘æœ‰ç©ºæ…¢æ…¢æã€‚

### å¯¹è±¡åŒ–SQL
æˆ‘ä»¬javaç¨‹åºå‘˜ï¼Œå·ç§°æ˜¯é¢å‘å¯¹è±¡å˜æˆçš„ã€‚\
sqlæ˜æ˜æ˜¯ä¸ªå¯ä»¥è¯­ä¹‰åŒ–çš„ä¸œè¥¿ï¼Œä¸ºå•¥ä¸ç”¨ç”¨é¢å‘å¯¹è±¡çš„æ–¹å¼æ¥è¡¨è¾¾å‘¢ï¼Ÿ\
hibernateå¯èƒ½ç®—æ˜¯ï¼Œä½†æ˜¯å®ƒå®Œå…¨å®šä¹‰äº†ä¸€å¥—æ–°çš„è§„åˆ™ï¼ŒsqlåŸå‹éƒ½æ²¡äº†ï¼Œå¤ªé‡äº†ï¼Œæˆ‘ä¸å–œæ¬¢ã€‚\
mybatisåªæ˜¯ä¸€ç§sqlæ‹¼æ¥æ–¹å¼ï¼Œè·Ÿå¯¹è±¡å®Œå…¨ä¸æ²¾è¾¹ã€‚\
mybatisPlusåªæ˜¯mybatisæ‹¼è¯­å¥çš„åŠ å¼ºç‰ˆã€‚\
è¿˜æœ‰æˆ‘æœ€è¿‘çŸ¥é“çš„ä¸€ä¸ªæ–°çš„æ¡†æ¶[JOOQ](https://github.com/jOOQ/jOOQ)ï¼Œè¿™ä¸ªå¤§æ¦‚æ˜¯æœ€æ¥è¿‘æˆ‘æƒ³è¦ä¸­çš„å¯¹è±¡åŒ–sqläº†ï¼Œä½†æ˜¯ä»–çš„è¿˜æ˜¯æ›´åƒä¸€ç§ç”¨javaä»£ç æ‹¼è¯­å¥çš„é€»è¾‘ã€‚\
sqlæ˜¯ä¸€ç§æœ‰å±‚çº§ã€æœ‰åŒ…å«å…³ç³»çš„è¯­æ³•ï¼Œå…¶ä¸­æœ‰ç€å­æŸ¥è¯¢ã€è”è¡¨æŸ¥è¯¢è¿™ç§å¤æ‚çš„æ“ä½œã€‚\
å¯¹è±¡åŒ–æ˜¯å•¥å‘¢ï¼Ÿ\
è¡¨å¯ä»¥è§†ä¸ºå¯¹è±¡ï¼›selectéƒ¨åˆ†å¯ä»¥è§†ä¸ºå¯¹è±¡ï¼›froméƒ¨åˆ†å¯ä»¥æ˜¯ä¸ºå¯¹è±¡â€¦â€¦\
å¥½åƒè¿˜æ˜¯å¾ˆéš¾è¡¨è¾¾å‡ºæ¥â€¦â€¦\
æˆ‘è§‰å¾—æœ‰ä¸€ä¸ªå°ç‚¹å¯èƒ½èƒ½ç¨å¾®æ„Ÿå—ä¸€ä¸‹ï¼Œå°±æ˜¯å½“æˆ‘ä»¬è”è¡¨äº†å¤šä¸ªè¡¨å¹¶ä¸”å…¶ä¸­æœ‰äº›è¡¨é‡å¤æ—¶ï¼Œé‚£ä¹ˆåœ¨æŸ¥è¯¢æ¡ä»¶ä¸­ï¼Œæˆ‘å¦‚ä½•é€šè¿‡å¯¹è±¡åŒ–sqlæ¥è¡¨è¾¾ï¼Œæˆ‘è¦ç”¨å“ªä¸ªè”è¡¨çš„è¡¨æ¥è¿›è¡Œæ¡ä»¶æŸ¥è¯¢ã€‚\
æˆ‘è§‰å¾—èƒ½æŠŠè¿™ä¸€ç‚¹åšå¥½ï¼Œå¹¶ä¸”çœ‹çš„äººä¹Ÿèƒ½ä¸€ç›®äº†ç„¶ï¼Œå°±ç®—å®ç°çš„æ¯”è¾ƒå¥½äº†ã€‚\
è¿™æ–¹é¢æˆ‘çš„è§£æ³•ä¼šæœ‰äº›éº»çƒ¦ï¼Œä½†æ˜¯æˆ‘è§‰å¾—è¿˜æ˜¯èƒ½ä¸€ç›®äº†ç„¶çš„ã€‚\
æˆ‘çš„æ–¹æ¡ˆè¿˜æœ‰ä¸ªéå¸¸å¤§çš„ä¼˜åŠ¿ã€‚\
å°±æ˜¯ä½ å¾ˆéš¾å†™å‡ºé”™çš„sqlè¯­å¥ï¼Œè¿™æ–¹é¢æˆ‘éå¸¸å·§å¦™çš„åˆ©ç”¨äº†javaè¯­è¨€çš„ç‰¹æ€§ï¼Œç»§æ‰¿ã€æ³›å‹ä¹‹ç±»çš„ï¼Œå®ç°äº†ä¸€ç§æ•ˆæœã€‚\
ä½ å¯ä»¥è½»æ¾é€šè¿‡IDEçš„æç¤ºå†™å‡ºè¯­å¥ï¼Œåªè¦èƒ½é€šè¿‡ç¼–è¯‘é‚£ä¹ˆå‡ ä¹å°±æ˜¯åˆæ³•çš„sqlã€‚\
è¿™ä¸€ç‚¹ä¸Šï¼Œæˆ‘ä»æ²¡è§æœ‰æ¡†æ¶èƒ½åšåˆ°è¿‡ï¼Œå¹¶ä¸”è¿™ä¹ˆä¼˜é›…!\
è™½ç„¶ä¸æ•¢å¤§å£°BBï¼Œä½†æ˜¯è¿™å¯èƒ½æ˜¯æˆ‘é¦–åˆ›çš„ï¼\
æœ€åè¯´ä¸‹è§£æã€‚\
å¯¹è±¡åŒ–sqlçš„è§£æä¹Ÿæ˜¯éå¸¸å¤´ç—›çš„ï¼Œä½ å¯ä»¥æƒ³è±¡ï¼Œå½“ä¸€ä¸ªæŸ¥è¯¢å­˜åœ¨è”è¡¨ã€å­æŸ¥è¯¢ã€åµŒå¥—å­æŸ¥è¯¢æ—¶ï¼Œè¯¥æ€ä¹ˆä¸€ä¸ªä¸ªæ‘˜å‡ºå¯¹åº”çš„è¡¨å’Œå­—æ®µã€‚\
è¿™æ–¹é¢ï¼Œæˆ‘åœ¨è§£ææ—¶ï¼ŒæŠ½è±¡å‡ºä¸€å±‚è™šæ‹Ÿçš„ä»£ç†å±‚ï¼Œç”¨ä»£ç†å±‚ä¸­çš„å¯¹è±¡æ¥ä»£æ›¿ä¸€ä¸ªä¸ªè¡¨ã€‚\
è¯´èµ·æ¥è½»æ¾ï¼Œä¸ºäº†è§£å†³è¿™ä¸ªéš¾é¢˜æˆ‘ä¸çŸ¥é“è–…æ‰å¤šå°‘å¤´å‘ã€‚\

### è¯­å¥æ‹¼æ¥
è¿™ä¸ªå•ç‹¬ä½œä¸ºä¸€ä¸ªç‰¹æ€§æœ‰ç‚¹å¥‡æ€ªã€‚\
sqlå°±çŸ­çŸ­çš„é‚£ä¹ˆä¸€æ®µå­—ç¬¦ä¸²å®é™…ä¸Šè€—ä¸äº†å¤ªå¤šæ€§èƒ½ï¼Œä¸è¿‡æˆ‘ä¸ºäº†æ‹¼sqlçš„æè‡´æ•ˆç‡è¿˜æ˜¯æ•´äº†ç‚¹èŠ±æ´»ã€‚\
ä¸€èˆ¬sqlæ‹¼æ¥éƒ½æ˜¯ç”¨å ä½ç¬¦æ›¿æ¢çš„ã€‚\
é¦–å…ˆçœ‹çœ‹sqlçš„è¯­æ³•æ ‘ã€‚
çœŸçš„æ˜¯ä¸€æ£µæ ‘ã€‚
![](docs/img/yfs.png)\
æˆ‘å°†å¯¹è±¡åŒ–çš„sqlåˆ©ç”¨èµ·æ¥ï¼Œæœ‰äº†è¯­å¥çš„çˆ¶å­åŒ…å«å…³ç³»ï¼Œå¯ä»¥å°†æ¯ä¸ªéƒ¨åˆ†è¿›è¡Œç¼“å­˜ã€‚\
å…¶ä¸­ä¸èƒ½ç¼“å­˜çš„åœ°æ–¹ï¼Œæ¯”å¦‚å‚æ•°ï¼Œå°±æ ‡è®°ä¸Šï¼ŒåŒæ—¶å­çº§å¯¹è±¡ä¸èƒ½ç¼“å­˜ï¼Œé‚£çˆ¶çº§å¯¹è±¡ä¹Ÿä¸èƒ½ç¼“å­˜ï¼Œè¦æœ‰è¿å¸¦å¤±æ•ˆçš„èƒ½åŠ›ã€‚\
è¿™æ ·å¤„ç†æ•´æ¡sqlè¯­å¥åã€‚\
![](docs/img/bnhc.png)\
å¦‚å›¾ï¼Œçº¢è‰²æ˜¯ä¸èƒ½ç¼“å­˜çš„ï¼Œç»¿è‰²æ˜¯å¯ä»¥ç¼“å­˜çš„ã€‚\
åªè¦è¯­å¥ä¸­æ¯ä¸ªéƒ¨ä½éƒ½èƒ½ç¼“å­˜ï¼Œé‚£ä¹ˆæœ€å¤–å±‚çš„çˆ¶çº§å°±èƒ½ç›´æ¥æ‹¿åˆ°ã€‚\
è™½ç„¶åŸç†å¾ˆç®€å•ï¼Œä¸è¿‡å®ç°è¿˜èŠ±äº†ç‚¹å°å¿ƒæ€ï¼Œåšè¿™ç§å°ç©å…·æŒºå¥½ç©çš„ã€‚\

### æ‰©å±•æ€§å¼º
åœ¨æˆ‘çœ‹æ¥ï¼Œæ‰©å±•æ€§æ‰èƒ½å†³å®šè¿™ä¸ªæ¡†æ¶çš„ç”Ÿå‘½åŠ›ã€‚\
å¤§çš„æ–¹é¢æ¥çœ‹ã€‚\
æˆ‘è®¾è®¡çš„æ¶æ„ï¼ŒæŠŠæ¯ä¸ªè¿‡ç¨‹éƒ½æ‹†æˆéƒ¨ä»¶ï¼Œæ¯ä¸ªéƒ¨ä»¶éƒ½å·¥å…·åŒ–ï¼Œä½ å¯ä»¥å•ç‹¬ä½¿ç”¨æ¯ä¸ªéƒ¨ä»¶ã€‚\
ä»ç»†å¾®å¤„çœ‹ï¼Œæ¯ä¸ªè¯­å¥çš„è§£æï¼Œæ¯æ¬¡æ‰§è¡Œå‰åã€åŒ…æ‹¬æ‰§è¡Œæœ¬èº«ï¼Œéƒ½å……åˆ†é¢„ç•™äº†æ‰©å±•çš„ç‚¹ã€‚\
æˆ‘è®¾æƒ³çš„æ˜¯ï¼Œå¯ä»¥æœ‰ä¸€ä¸ªä¸“é—¨çš„çº¿ä¸Šç®¡ç†åå°ï¼Œç›‘æ§è¿™äº›æ•°æ®ï¼Œå¿…è¦æ—¶ç”šè‡³å¯ä»¥æ›´æ”¹çº¿ä¸Šæ­£åœ¨è¿è¡Œçš„sqlã€‚

## åŸºæœ¬æŸ¥è¯¢æ¼”ç¤º
### 1ã€æŸ¥è¯¢
#### å‡†å¤‡è¡¨å¯¹è±¡ï¼ˆå¿…é¡»æœ‰getteræ–¹æ³•ï¼Œè¿™é‡ŒèŠ‚çœç¯‡å¹…çœç•¥ï¼‰
```java
@SQLTable("t_province")
public class ProvinceDO {
    @PrimaryKey
    @SQLColumn("code")
    @MySQLInt
    private Integer code;

    @SQLColumn
    @MySQLVarchar(length = 16)
    @Comment("çœä»½åç§°")
    private String name;
}
```
``` java
@SQLTable("t_city")
public class CityDO {
    @PrimaryKey
    @SQLColumn("code")
    @MySQLInt
    private Integer code;

    @SQLColumn
    @MySQLVarchar(length = 16)
    @Comment("åŸå¸‚åç§°")
    private String name;

    @SQLColumn("province_code")
    @MySQLInt
    @Comment("æ‰€å±çœä»½code")
    private Integer provinceCode;
}
```
#### æŸ¥è¯¢æ¼”ç¤º
```java
public class QueryTest {
  /**
   * é¢„ç¼–å†™æŸ¥è¯¢é€»è¾‘
   **/
  @RivuletDesc("queryProvince")
  public WholeDesc queryProvince() {
    // ä»å‚æ•°ä¸­åŠ¨æ€å–å€¼
    Param<Integer> provinceCodeParam = Param.of(Integer.class, "provinceCode", ParamCheckType.NATURE);
    // æŸ¥è¯¢è¯­å¥
    return QueryBuilder.query(ProvinceDO.class, ProvinceDO.class)
            .where(Condition.equalTo(CheckCondition.notNull(provinceCodeParam), ProvinceDO::getCode, provinceCodeParam))
            .build();
  }

  /**
   * æ‰§è¡ŒæŸ¥è¯¢
   **/
  public void query() {
    Rivulet rivulet = createDefaultRivuletManager().getRivulet();
    HashMap<String, Object> paramMap = new HashMap<>();
    // å‚æ•°
    paramMap.put("provinceCode", 123);
    // æŸ¥è¯¢ï¼Œé€šè¿‡é¢„ç¼–å†™çš„æŸ¥è¯¢è¯­å¥æ–¹æ³•ä¸Šçš„æ³¨è§£@RivuletDescçš„keyæ‰¾åˆ°è¯­å¥ã€‚
    ProvinceDO provinceDO = rivulet.queryOneByDescKey("queryProvince", paramMap);
  }
  /**
   * é¢„å…ˆç”Ÿæˆç®¡ç†å™¨
   **/
  public RivuletManager createDefaultRivuletManager() {
    DefaultWarehouseManager defaultWarehouseManager = new DefaultWarehouseManager("zly.rivulet.mysql");
    return new DefaultMySQLDataSourceRivuletManager(
      new MySQLRivuletProperties(),
      new ConvertorManager(),
      defaultWarehouseManager,
      createDataSource()
      );
  }
}
```

#### æŸ¥è¯¢æ˜ å°„åŸDOæ¨¡å‹è¯­å¥
```java
public class Desc {
    @RivuletDesc("queryProvince")
    public WholeDesc queryProvince() {
        // ä»å‚æ•°ä¸­åŠ¨æ€å–å€¼
        Param<Integer> provinceCodeParam = Param.of(Integer.class, "provinceCode", ParamCheckType.NATURE);
        // æŸ¥è¯¢
        return QueryBuilder.query(ProvinceDO.class, ProvinceDO.class)
            .where(Condition.equalTo(CheckCondition.notNull(provinceCodeParam), ProvinceDO::getCode, provinceCodeParam))
            .build();
    }
}
```
+ é€šè¿‡QueryBuilderå¼€å§‹ç¼–å†™sqlè¯­å¥
  + queryçš„ç¬¬ä¸€ä¸ªå¯¹è±¡æ˜¯Fromçš„è¡¨å¯¹è±¡ï¼Œç¬¬äºŒä¸ªå¯¹è±¡æ˜¯æŸ¥è¯¢ç»“æœæ˜ å°„
  + è¿™é‡ŒæŸ¥è¯¢å¯¹è±¡æ˜¯ProvinceDOï¼Œæ˜ å°„å¯¹è±¡ä¹Ÿæ˜¯ProvinceDOï¼Œå¯ä»¥è®¾ç½®æˆä¸åŒçš„ï¼Œä½†æ˜¯è¦æ‰‹åŠ¨æ˜ å°„select

#### è”è¡¨æŸ¥è¯¢
å‡†å¤‡ä¸€ä¸ªè”è¡¨æ¨¡å‹ï¼Œç”¨äºæè¿°è¡¨ä¹‹é—´çš„è¿æ¥å…³ç³»
```java
/**
 * è”è¡¨å¯¹è±¡éœ€è¦ç»§æ‰¿QueryComplexModel
 **/
public class CityProvinceJoin implements QueryComplexModel {

    private CityDO cityDO;

    private ProvinceDO provinceDO;

    @Override
    public ComplexDescriber register() {
        ComplexDescriber describer = ComplexDescriber.from(cityDO);

        // è”è¡¨æ¡ä»¶
        describer.leftJoin(provinceDO).on(JoinCondition.equalTo(provinceDO::getCode, cityDO::getProvinceCode));

        return describer;
    }
}
```
è”è¡¨æŸ¥è¯¢è¯­å¥
```java
public class Desc {
    @RivuletDesc("queryCityProvinceJoin")
    public WholeDesc queryCityProvinceJoin() {
        // ä»å‚æ•°ä¸­åŠ¨æ€å–å€¼
        Param<Integer> cityCodeParam = Param.of(Integer.class, "cityCode", ParamCheckType.NATURE);
        // queryçš„fromå¯¹è±¡å°±æ˜¯ä¸Šé¢çš„è”è¡¨æ¨¡å‹
        return QueryBuilder.query(CityProvinceJoin.class, CityProvinceJoin.class)
            .where(
                Condition.equalTo(x -> x.getCityDO().getCode(), cityCodeParam)
            ).build();
    }
}
```
#### æ˜ å°„ä¸åŒçš„æŸ¥è¯¢ç»“æœå¯¹è±¡
```java
public class Desc {
    @RivuletDesc("queryCityProvinceJoin2")
    public WholeDesc queryCityProvinceJoin2() {
        // ä»å‚æ•°ä¸­åŠ¨æ€å–å€¼
        Param<Integer> cityCodeParam = Param.of(Integer.class, "cityCode", ParamCheckType.NATURE);
        // ä½¿ç”¨ä¸åŒçš„å¯¹è±¡æ˜ å°„ç»“æœ
        return QueryBuilder.query(CityProvinceJoin.class, CityInfo.class)
            .select(
                Mapping.of(CityInfo::setCityCode, x -> x.getCityDO().getCode()),
                Mapping.of(CityInfo::setCityName, x -> x.getCityDO().getName()),
                Mapping.of(CityInfo::setProvinceCode, x -> x.getProvinceDO().getCode()),
                Mapping.of(CityInfo::setProvinceName, x -> x.getProvinceDO().getName())
            )
            .where(Condition.equalTo(x -> x.getCityDO().getCode(), cityCodeParam))
            .build();
    }
}
```

## æ²¡æœ‰ç¼“å­˜
+ mybatisæ˜¯æœ‰ç¼“å­˜çš„ï¼Œä½†æ˜¯æˆ‘è¿™é‡Œæ²¡æœ‰ã€‚
+ åœ¨å•æœºçš„æ—¶ä»£ï¼Œç¼“å­˜æ˜¯ä¼šæœ‰éå¸¸å¤§çš„ä¼˜åŠ¿ï¼Œä½†æ˜¯ç°åœ¨éƒ½æ˜¯é›†ç¾¤ï¼Œæ„Ÿè§‰ç¼“å­˜å·²ç»æœ‰ç‚¹é¸¡è‚‹äº†ã€‚
+ ç›®å‰æ²¡è€ƒè™‘ï¼Œä½†æ˜¯æˆ‘ç•™ä¸‹äº†è¶³å¤Ÿçš„æ‰©å±•ç‚¹ï¼Œç›¸åŠ ä¹Ÿèƒ½åŠ ã€‚

## è®¾è®¡æ¼”è¿›
+ ç¬¬ä¸€é˜¶æ®µ
  + ä¸€å¼€å§‹æˆ‘åªæ˜¯åœ¨å¼€å‘è¿‡ç¨‹ä¸­ä½¿ç”¨äº†mybatisï¼Œè§‰å¾—æ¯æ¬¡å†™è¯­å¥éƒ½æ¯”è¾ƒéº»çƒ¦ï¼Œè¿˜æ€»æ˜¯å†™é”™ã€‚
  + è§‰å¾—hibernateé‚£ç§æ˜ å°„å¾ˆæ–¹ä¾¿ï¼Œä½†æ˜¯è”è¡¨æŸ¥è¯¢åˆå¾ˆéº»çƒ¦ã€‚
  + äºæ˜¯æƒ³è¦è‡ªå·±è®¾è®¡ä¸€ç§æ–¹å¼æŠŠä»–ä»¬ç»“åˆèµ·æ¥ã€‚
+ ç¬¬äºŒé˜¶æ®µ
  + å½“æˆ‘åœ¨è®¾è®¡æˆ‘è®¾æƒ³ä¸­çš„æ¡†æ¶æ—¶ï¼Œç¬¬ä¸€ç‚¹æƒ³åˆ°çš„ï¼Œä¹Ÿæ˜¯æœ€é‡è¦çš„å®šä½å°±æ˜¯æ–¹ä¾¿æ‹¼è¯­å¥ã€‚
  + æ€§èƒ½æ–¹é¢ï¼Œè¯­å¥å¿…é¡»é¢„å…ˆç¼–è¯‘å¥½ï¼Œæ˜“äºæ‹¼æ¥å‚æ•°ï¼Œæ‹¼å¥½è¯­å¥åï¼Œå…¶ä½™çš„ç”±è¿æ¥æ± æ“å¿ƒã€‚
  + mybatis-plus
    + å½“æˆ‘å¼€å§‹è®¾è®¡è°ƒç ”æ—¶ï¼Œåœ¨githubä¸Šéšä¾¿æŸ¥äº†ä¸€ä¸‹ï¼Œçœ‹åˆ°äº†mybatis-plus
    + å…¶å®å®ƒæœ‰ä¸€éƒ¨åˆ†å¯ä»¥æ»¡è¶³æˆ‘çš„éœ€è¦äº†,ä½†æ˜¯æˆ‘é€æ­¥å‘ç°mybatis-plusè¿˜æ˜¯æ”¯æŒçš„ä¸å¤Ÿï¼Œæ‹¼è¯­å¥çš„èƒ½åŠ›å±€é™è¾ƒå¤§ã€‚
    + å¹¶ä¸”mybatis-plusåªæ˜¯mybatisçš„ä¸€ä¸ªæ’ä»¶ï¼Œæœ‰ä¸€å®šçš„å±€é™æ€§ã€‚
    + å½“ç„¶ï¼Œè¯´äº†è¿™ä¹ˆå¤šï¼Œä¸»è¦è¿˜æ˜¯è§‰å¾—æˆ‘çš„è®¾è®¡æ›´å¥½ã€‚
+ ç¬¬ä¸‰é˜¶æ®µ
  + å½“æˆ‘æŠŠæ‹¼è¯­å¥ä½œä¸ºæ¡†æ¶çš„ä¸»è¦å®šä½æ—¶ï¼Œæœ‰ä¸€å¤©æˆ‘çªç„¶æƒ³åˆ°ï¼ŒæŸ¥sqlæ˜¯æ‹¼è¯­å¥ï¼ŒæŸ¥mongoä¹Ÿæ˜¯æ‹¼è¯­å¥ï¼ŒæŸ¥esä¹Ÿæ˜¯æ‹¼è¯­å¥ã€‚
  + é‚£å®Œå…¨å¯ä»¥æŠŠä»–ä»¬ç»Ÿä¸€èµ·æ¥ï¼Œæ‰€ä»¥å˜æˆäº†ç°åœ¨çš„æ¨¡å—åˆ†åŒ…ã€‚
+ ç¬¬å››é˜¶æ®µ
  + sqlã€mongoã€esè¿™äº›å­˜å‚¨ç±»çš„ä¸­é—´ä»¶ï¼Œæœ‰ä¸€äº›é€šç”¨çš„æŸ¥è¯¢èƒ½åŠ›ï¼Œæ¯”å¦‚ï¼š
    + equalå­—æ®µ
    + inå­—æ®µ
    + \>
    + <
    + like
    + â€¦â€¦
  + è¿™ç§ç®€å•çš„å•è¡¨æŸ¥è¯¢ï¼Œä»¥åŠå•è¡¨çš„å¢åˆ æ”¹ï¼Œæ˜¯ç»å¤§éƒ¨åˆ†çš„ä½¿ç”¨åœºæ™¯ã€‚
  + é‚£ä¹ˆå®Œå…¨å¯ä»¥åœ¨baseå±‚ç”¨ç»Ÿä¸€çš„æ ¼å¼æ¥å±è”½æ‰è¿™ç§æ£€æŸ¥æŸ¥è¯¢çš„åº•å±‚è¯­å¥ã€‚
    + å¯¹ä½¿ç”¨è€…æ¥è¯´å¯ä»¥ç”¨åŒä¸€ç§æ ¼å¼ï¼ŒæŸ¥è¯¢sqlã€mongoã€esã€‚
  + å®é™…ä¸Šéšç€ç°åœ¨å¾®æœåŠ¡çš„æµè¡Œï¼Œè¡¨è¶Šæ‹†è¶Šç»†ã€ç®€å•çš„å•è¡¨æŸ¥è¯¢å·²ç»æˆä¸ºå¸¸æ€ã€‚

## ç”»é¥¼
+ æœ€å¤§çš„é¥¼ï¼Œå°±æ˜¯æœ‰ä¸€å¤©èƒ½ç»Ÿä¸€æŒä¹…å±‚ï¼Œç”¨åŒä¸€ç§è¯­æ³•è°ƒç”¨æ‰€æœ‰çš„å­˜å‚¨ä¸­é—´ä»¶ã€‚
+ è¿è¡Œæ—¶
  + å¦‚æœä½ ä»¬å…¬å¸æœ‰ä¸ªç±»ä¼¼dbç®¡ç†çš„å¹³å°ã€‚
  + æˆ‘é€šè¿‡æ‰©å±•æ¥å£ç•™äº†å¾ˆå¤šå£å­ï¼Œç†è®ºä¸Šå¯ä»¥åœ¨è¿è¡Œè¿‡ç¨‹ä¸­è°ƒæ•´è¿™äº›ã€‚
  + æ‰€æœ‰çš„è¯­å¥éƒ½æ˜¯ä»¥definitionä¸ºåŸºç¡€çš„ï¼Œé€šè¿‡é¢„å®šä¹‰çš„keyæ˜ å°„
    + ç†è®ºä¸Šå¯ä»¥åœ¨ç¨‹åºè¿è¡Œæ—¶ä¿®æ”¹definitionï¼Œé‡æ–°æ˜ å°„åˆ°keyï¼Œä¹Ÿå°±æ˜¯ä¿®æ”¹è¯­å¥ã€‚
    + å½“ç„¶æ˜ å°„ç»“æœä¸èƒ½å˜ã€‚
    + å‚æ•°ä¹Ÿæ˜¯å›ºå®šçš„æ²¡æ³•å˜ã€‚
+ ç¼–è¯‘æ—¶
  + å®šä¹‰å™¨ä¸­æ”¶é›†äº†è¡¨çš„ddlå…ƒæ•°æ®ï¼Œ
    + ç†è®ºä¸Šå¯ä»¥åœ¨ç¼–è¯‘é˜¶æ®µï¼Œå°±å¯¹è¯­å¥è¿›è¡Œåˆ†æï¼Œåˆ¤æ–­æœ‰æ²¡æœ‰èµ°ç´¢å¼•ï¼Œæˆ–è€…å…¶ä»–ä»€ä¹ˆã€‚
  + æˆ‘æŠŠsqlè¯­å¥è§£æ„çš„éå¸¸ç»†ï¼Œæ¯ä¸ªå…ƒç´ éƒ½èƒ½ç‹¬ç«‹è·å–ï¼Œæ‰€ä»¥è§£æè¯­å¥å¾ˆå®¹æ˜“ã€‚

## åŠæˆå“
+ è¿™ä¸ªæ¡†æ¶ç»è¿‡å‡ ç•ªæ”¹è¿›ã€æ¨å€’é‡å¤´å†æ¥ï¼Œåˆå› ä¸ºæˆ‘çš„æ‹–å»¶ç—‡ï¼Œå†ç»äº†ä¸€å¹´å¤šå¿«ä¸¤å¹´ï¼Œç»ˆäºæˆä¸ºä¸€ä¸ªåŠæˆå“ã€‚
+ mysql
  + æˆ‘æ˜¯ä»¥mysqlçš„è¯­æ³•æ”¯æŒæ¥å®ç°ç¬¬ä¸€ä¸ªç‰ˆæœ¬çš„
  + åæ¥å‘ç°æƒ³è¦ç›¸å¯¹å®Œæ•´çš„æ”¯æŒsqlï¼ŒçœŸçš„å¤ªéš¾äº†ã€‚
    + sqlçš„è”è¡¨æŸ¥è¯¢ã€å­æŸ¥è¯¢åµŒå¥—ã€åˆ«åã€å„ç§ç±»å‹ï¼Œè¿˜æœ‰å‡½æ•°éƒ½å¤ªå˜æ€äº†ã€‚
  + å¥½åœ¨ç°åœ¨å·²ç»è§£å†³äº†è¿™äº›ï¼Œç›®å‰çš„åŠæˆå“å·²ç»åˆæ­¥å¯ä»¥å±•ç¤ºå‡ºæˆ‘çš„æ¡†æ¶çš„å¼ºå¤§ä¹‹å¤„ã€‚
+ ç›®å‰è¿˜æ˜¯ä¸ªåŠæˆå“ï¼Œä¸è¿‡æš‚æ—¶æ²¡æ—¶é—´å®Œå–„äº†ï¼Œå…ˆæ”¾å‡ºæ¥ç»™å¤§å®¶çœ‹çœ‹ï¼Œå¸®å¿™æ”¯æŒä¸‹ç‚¹ç‚¹starï¼Œå¸Œæœ›ä¸ºæˆ‘ä¸‹æ¬¡è·³æ§½åŠ ç‚¹åˆ†ã€‚
+ å¦ç™½æ¥è¯´ï¼Œé¥¼ç”»çš„å¤ªå¤§ï¼Œæˆ‘ä¸€ä¸ªäººæœ‰ç‚¹æä¸å®šäº†ã€‚
  + è™½ç„¶å„ä¸ªç»„ä»¶å·²ç»è·‘é€šäº†åŸºæœ¬é€»è¾‘ï¼Œä½†æ˜¯å¾ˆå¤šç»†èŠ‚æ²¡å¡«å……ï¼Œæ“ä½œç¬¦ã€å‡½æ•°ä¹‹ç±»çš„åªå®ç°äº†ä¸€ä¸¤ä¸ªã€‚
  + åŒ…æ‹¬å¾ˆå¤šå°‘è§çš„ç±»å‹ï¼Œæˆ–è€…æˆ‘ä¸€æ—¶æ²¡æƒ³èµ·æ¥çš„ä¸œè¥¿è¿˜æ²¡æ”¯æŒã€‚
+ æˆ‘è‡ªå·±å†™äº†å‡ ä¸ªæµ‹è¯•æ–¹æ³•ï¼Œå‹‰å¼ºèƒ½è¿è¡Œï¼Œè‚¯å®šè¿˜éƒ½æ˜¯bugï¼Œå…ˆçœ‹ç€ï¼Œæˆ‘æ…¢æ…¢æ”¹ã€‚

## å¯„è¯­
+ å¸Œæœ›ä»¥åæœ‰å…¬å¸æ¥ç›˜ï¼Œè®©æˆ‘å…¨èŒç»´æŠ¤æœ€å¥½äº†ğŸ¤£
+ ä¸åšæ¢¦äº†ï¼Œå…ˆæ´»ä¸‹æ¥å†è¯´ã€‚
+ æˆ‘é—·å¤´å¼€å‘äº†å¿«ä¸¤å¹´ï¼Œå†™ä»£ç è¶Šæ¥è¶Šæä¸èµ·åŠ²ï¼Œä¹Ÿæ˜¯å› ä¸ºæ²¡æœ‰åé¦ˆã€‚
+ è™½ç„¶æˆ‘ä¸€ç›´è§‰å¾—ä¸œè¥¿å¾ˆä¸é”™ï¼Œä½†éƒ½æ˜¯è‡ªå—¨ï¼Œæ²¡äººçœŸæ­£çœ‹åˆ° 
+ æœ‰äº›ç»†èŠ‚æˆ‘è§‰å¾—æˆ‘è®¾è®¡çš„éå¸¸nbï¼Œå¸Œæœ›æœ‰ä¸€å¤©æœ‰äººèƒ½å‘ç°ã€‚
+ ç°åœ¨è¿˜æ˜¯ä¸ªåŠæˆå“æ”¾å‡ºæ¥ï¼Œä¹Ÿæ˜¯å› ä¸ºè‡ªå—¨å¤ªä¹…æ²¡åŠ¨åŠ›äº†ã€‚
+ ç‚¹ä¸ªstaræ˜¯å¯¹æˆ‘çš„é¼“åŠ±ï¼Œå¸Œæœ›å¤§å®¶æ”¯æŒä¸€ä¸‹ã€‚
